<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Moments: Preston â€“ Garth Dew</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'neue-haas-grotesk-text', sans-serif;
      color: #161717;
      background-color: #fff;
      font-size: 16px;
      font-weight: 400;
      line-height: 1.6;
    }

    /* Layout Structure */
    .layout-wrapper {
      display: flex;
      min-height: 100vh;
    }

    /* Sidebar */
    .sidebar {
      position: fixed;
      left: 0;
      top: 0;
      width: 250px;
      height: 100vh;
      background-color: #ffffff;
      border-right: 1px solid #cccccc;
      padding: 2rem 1.5rem;
      z-index: 100;
      overflow-y: auto;
    }

    .sidebar-header {
      font-size: 16px;
      font-weight: 400;
      margin-bottom: 2rem;
      color: #161717;
    }

    .sidebar-section {
      margin-bottom: 1.5rem;
    }

    .sidebar-section h3 {
      font-size: 16px;
      font-weight: 400;
      margin-bottom: 0.5rem;
      color: #161717;
    }

    .sidebar-nav {
      list-style: none;
      padding-left: 1rem;
    }

    .sidebar-nav li {
      margin-bottom: 0.3rem;
    }

    .sidebar-nav a {
      color: #666666;
      text-decoration: none;
      font-size: 16px;
      font-weight: 400;
      display: block;
      padding: 0.25rem 0;
      transition: color 0.2s ease;
    }

    .sidebar-nav a:hover {
      color: #161717;
    }

    /* Main Content */
    .main-content {
      margin-left: 250px;
      width: calc(100% - 250px);
      min-height: 100vh;
    }

    .content-area {
      max-width: 600px;
      margin: 0;
      margin-left: 2rem;
      padding: 2rem 1rem;
    }

    .wide-content {
      max-width: 1000px;
      margin: 2rem 0;
      margin-left: 2rem;
      padding: 0 1rem;
    }

    /* Typography */
    h1, h2, h3, h4, h5, h6 {
      font-size: 16px;
      font-weight: 400;
      margin-bottom: 1rem;
      line-height: 1.2;
      text-align: left;
      color: #161717;
    }

    h1 {
      margin-bottom: 2rem;
    }

    p {
      margin-bottom: 1rem;
    }

    a {
      color: #161717;
      text-decoration: underline;
      text-decoration-color: #666666;   
      transition: text-decoration-color 0.2s ease;
    }

    a:hover {
      text-decoration-color: #161717;   
    }

    /* Hamburger Menu (Mobile) */
    .hamburger {
      display: none;
      position: fixed;
      top: 1rem;
      right: 1rem;
      z-index: 1000;
      background: rgba(255, 255, 255, 0.5);
      border: none;
      cursor: pointer;
      padding: 0.5rem;
      font-size: 24px;
      color: #161717;
    }

    .overlay {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0,0,0,0.5);
      z-index: 99;
    }

    /* Gallery Navigation */
    .gallery-nav {
      margin-bottom: 1rem;
      display: none;
    }

    .gallery-nav.show {
      display: block;
    }

    .nav-button {
      background: none;
      border: none;
      color: #161717;
      font-size: 16px;
      font-family: inherit;
      cursor: pointer;
      margin-right: 1rem;
      text-decoration: underline;
      text-decoration-color: #666666;
      transition: text-decoration-color 0.2s ease;
    }

    .nav-button:hover {
      text-decoration-color: #161717;
    }

    /* Thumbnail Grid */
    .thumbnail-grid {
      display: grid;
      grid-template-columns: repeat(6, 1fr);
      gap: 0.5rem;
      margin: 2rem 0;
      align-items: end;
    }

    .thumbnail {
      overflow: hidden;
      cursor: pointer;
      transition: opacity 0.2s ease;
      display: flex;
      align-items: flex-end;
      justify-content: center;
      min-height: 120px;
    }

    .thumbnail:hover {
      opacity: 0.8;
    }

    .thumbnail img {
      width: 100%;
      height: auto;
      object-fit: contain;
      max-height: 200px;
    }

    /* Carousel Styles */
    .carousel {
      position: relative;
      width: 100%;
      height: 600px;
      overflow: hidden;
      margin: 2rem 0;
      user-select: none;
      display: none;
    }

    .carousel.show {
      display: block;
    }

    .carousel-track {
      display: flex;
      height: 100%;
      transition: transform 0.3s ease;
    }

    .carousel-slide {
      min-width: 100%;
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: flex-start;
      background-color: #ffffff;
    }

    .carousel-slide img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      object-position: center;
    }

    .carousel-slide img.portrait {
      object-fit: contain;
      margin-left: 0;
      justify-self: flex-start;
    }

    .carousel-clickable {
      position: absolute;
      top: 0;
      bottom: 0;
      width: 50%;
      cursor: pointer;
      z-index: 10;
    }

    .carousel-clickable.left {
      left: 0;
      cursor: w-resize;
    }

    .carousel-clickable.right {
      right: 0;
      cursor: e-resize;
    }

    /* Mobile Styles */
    @media (max-width: 768px) {
      .sidebar {
        transform: translateX(-100%);
        transition: transform 0.3s ease;
        box-shadow: 2px 0 10px rgba(0,0,0,0.1);
        width: 100vw;
        padding: 2rem;
      }

      .sidebar.open {
        transform: translateX(0);
      }

      .main-content {
        margin-left: 0;
        width: 100%;
      }

      .hamburger {
        display: block;
      }

      .overlay.active {
        display: block;
      }

      .content-area {
        padding: 1rem;
        margin-left: 0;
      }

      .wide-content {
        padding: 0 1rem;
        margin-left: 0;
      }

      .thumbnail-grid {
        grid-template-columns: repeat(3, 1fr);
        gap: 0.5rem;
      }

      /* Hide thumbnail grid and carousel nav on mobile, show vertical stream */
      .thumbnail-grid,
      .gallery-nav,
      .carousel {
        display: none !important;
      }

      .photo-stream {
        display: block !important;
      }
    }

    /* Photo Stream (Mobile) */
    .photo-stream {
      display: none;
      max-width: 1000px;
      margin: 2rem auto;
      padding: 0 1rem;
    }

    .photo-stream img {
      width: 100%;
      height: auto;
      margin-bottom: 1rem;
      display: block;
    }
  </style>
</head>
<body>
  <!-- Your page content goes here - menu gets injected automatically -->
  <div class="content-area">
    <h1>Moments: Preston</h1>
  </div>
  
  <div class="wide-content">
    <!-- Gallery Navigation (hidden initially) -->
    <div class="gallery-nav">
      <button class="nav-button" onclick="moveSlide(-1)">previous</button>
      <button class="nav-button" onclick="moveSlide(1)">next</button>
      <button class="nav-button" onclick="showThumbnails()">thumbs</button>
    </div>

    <!-- Thumbnail Grid (shown initially) -->
    <div class="thumbnail-grid" id="thumbnailGrid">
      <div class="thumbnail" onclick="openCarousel(0)">
        <img src="/images/preston/preston1.jpg" alt="Preston 1">
      </div>
      <div class="thumbnail" onclick="openCarousel(1)">
        <img src="/images/preston/preston2.jpg" alt="Preston 2">
      </div>
      <div class="thumbnail" onclick="openCarousel(2)">
        <img src="/images/preston/preston3.jpg" alt="Preston 3">
      </div>
      <div class="thumbnail" onclick="openCarousel(3)">
        <img src="/images/preston/preston4.jpg" alt="Preston 4">
      </div>
      <div class="thumbnail" onclick="openCarousel(4)">
        <img src="/images/preston/preston5.jpg" alt="Preston 5">
      </div>
      <div class="thumbnail" onclick="openCarousel(5)">
        <img src="/images/preston/preston6.jpg" alt="Preston 6">
      </div>
      <div class="thumbnail" onclick="openCarousel(6)">
        <img src="/images/preston/preston7.jpg" alt="Preston 7">
      </div>
      <div class="thumbnail" onclick="openCarousel(7)">
        <img src="/images/preston/preston8.jpg" alt="Preston 8">
      </div>
      <div class="thumbnail" onclick="openCarousel(8)">
        <img src="/images/preston/preston9.jpg" alt="Preston 9">
      </div>
      <div class="thumbnail" onclick="openCarousel(9)">
        <img src="/images/preston/preston10.jpg" alt="Preston 10">
      </div>
      <div class="thumbnail" onclick="openCarousel(10)">
        <img src="/images/preston/preston11.jpg" alt="Preston 11">
      </div>
      <div class="thumbnail" onclick="openCarousel(11)">
        <img src="/images/preston/preston12.jpg" alt="Preston 12">
      </div>
      <div class="thumbnail" onclick="openCarousel(12)">
        <img src="/images/preston/preston13.jpg" alt="Preston 13">
      </div>
      <div class="thumbnail" onclick="openCarousel(13)">
        <img src="/images/preston/preston14.jpg" alt="Preston 14">
      </div>
      <div class="thumbnail" onclick="openCarousel(14)">
        <img src="/images/preston/preston15.jpg" alt="Preston 15">
      </div>
    </div>

          <!-- Carousel (hidden initially) -->
    <div class="carousel" id="carousel">
      <div class="carousel-track">
        <div class="carousel-slide">
          <img src="/images/preston/preston1.jpg" alt="Preston moment 1">
        </div>
        <div class="carousel-slide">
          <img src="/images/preston/preston2.jpg" alt="Preston moment 2">
        </div>
        <div class="carousel-slide">
          <img src="/images/preston/preston3.jpg" alt="Preston moment 3">
        </div>
        <div class="carousel-slide">
          <img src="/images/preston/preston4.jpg" alt="Preston moment 4">
        </div>
        <div class="carousel-slide">
          <img src="/images/preston/preston5.jpg" alt="Preston moment 5">
        </div>
        <div class="carousel-slide">
          <img src="/images/preston/preston6.jpg" alt="Preston moment 6">
        </div>
        <div class="carousel-slide">
          <img src="/images/preston/preston7.jpg" alt="Preston moment 7">
        </div>
        <div class="carousel-slide">
          <img src="/images/preston/preston8.jpg" alt="Preston moment 8">
        </div>
        <div class="carousel-slide">
          <img src="/images/preston/preston9.jpg" alt="Preston moment 9">
        </div>
        <div class="carousel-slide">
          <img src="/images/preston/preston10.jpg" alt="Preston moment 10">
        </div>
        <div class="carousel-slide">
          <img src="/images/preston/preston11.jpg" alt="Preston moment 11">
        </div>
        <div class="carousel-slide">
          <img src="/images/preston/preston12.jpg" alt="Preston moment 12">
        </div>
        <div class="carousel-slide">
          <img src="/images/preston/preston13.jpg" alt="Preston moment 13">
        </div>
        <div class="carousel-slide">
          <img src="/images/preston/preston14.jpg" alt="Preston moment 14">
        </div>
        <div class="carousel-slide">
          <img src="/images/preston/preston15.jpg" alt="Preston moment 15">
        </div>
      </div>
    </div>

    <!-- Photo Stream (Mobile Only) -->
    <div class="photo-stream">
      <img src="/images/preston/preston1.jpg" alt="Preston 1">
      <img src="/images/preston/preston2.jpg" alt="Preston 2">
      <img src="/images/preston/preston3.jpg" alt="Preston 3">
      <img src="/images/preston/preston4.jpg" alt="Preston 4">
      <img src="/images/preston/preston5.jpg" alt="Preston 5">
      <img src="/images/preston/preston6.jpg" alt="Preston 6">
      <img src="/images/preston/preston7.jpg" alt="Preston 7">
      <img src="/images/preston/preston8.jpg" alt="Preston 8">
      <img src="/images/preston/preston9.jpg" alt="Preston 9">
      <img src="/images/preston/preston10.jpg" alt="Preston 10">
      <img src="/images/preston/preston11.jpg" alt="Preston 11">
      <img src="/images/preston/preston12.jpg" alt="Preston 12">
      <img src="/images/preston/preston13.jpg" alt="Preston 13">
      <img src="/images/preston/preston14.jpg" alt="Preston 14">
      <img src="/images/preston/preston15.jpg" alt="Preston 15">
    </div>
  </div>

  <!-- Include the shared menu system -->
  <script src="/menu.js"></script>
  
  <!-- Gallery JavaScript -->
  <script>
    let currentSlide = 0;
    const slides = document.querySelectorAll('.carousel-slide');
    const totalSlides = slides.length;

    function openCarousel(slideIndex) {
      currentSlide = slideIndex;
      document.getElementById('thumbnailGrid').style.display = 'none';
      document.getElementById('carousel').classList.add('show');
      document.querySelector('.gallery-nav').classList.add('show');
      showSlide(currentSlide);
      handleImageLoad();
    }

    function showThumbnails() {
      document.getElementById('thumbnailGrid').style.display = 'grid';
      document.getElementById('carousel').classList.remove('show');
      document.querySelector('.gallery-nav').classList.remove('show');
    }

    function handleImageLoad() {
      const images = document.querySelectorAll('.carousel-slide img');
      images.forEach(img => {
        img.onload = function() {
          if (this.naturalHeight > this.naturalWidth) {
            this.classList.add('portrait');
          }
        };
        if (img.complete && img.naturalHeight > 0) {
          if (img.naturalHeight > img.naturalWidth) {
            img.classList.add('portrait');
          }
        }
      });
    }

    function showSlide(n) {
      if (n >= totalSlides) currentSlide = 0;
      if (n < 0) currentSlide = totalSlides - 1;
      
      const track = document.querySelector('.carousel-track');
      track.style.transform = `translateX(-${currentSlide * 100}%)`;
    }

    function moveSlide(direction) {
      currentSlide += direction;
      showSlide(currentSlide);
    }

    // Touch/swipe support
    const carousel = document.querySelector('.carousel');
    let startX = 0;
    let endX = 0;
    
    carousel.addEventListener('touchstart', (e) => {
      startX = e.touches[0].clientX;
    });

    carousel.addEventListener('touchmove', (e) => {
      e.preventDefault();
    });

    carousel.addEventListener('touchend', (e) => {
      endX = e.changedTouches[0].clientX;
      handleSwipe();
    });

    function handleSwipe() {
      const swipeThreshold = 50;
      const diff = startX - endX;
      
      if (Math.abs(diff) > swipeThreshold) {
        if (diff > 0) {
          moveSlide(1);
        } else {
          moveSlide(-1);
        }
      }
    }

    // Initialize
    document.addEventListener('DOMContentLoaded', function() {
      handleImageLoad();
    });
  </script>
</body>
</html>
