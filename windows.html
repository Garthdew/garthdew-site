<script>
    // This variable keeps track of whether the sound has played yet
    let hasPlayedSound = false;

    function showSurprise() {
        const imgElement = document.getElementById('target-image');
        const placeholder = document.getElementById('placeholder-text');
        const sound = document.getElementById('win-sound');
        
        // --- THE FIRST-CLICK SOUND LOGIC ---
        if (!hasPlayedSound) {
            sound.play().catch(e => console.log("Audio play prevented: ", e));
            hasPlayedSound = true; // Set to true so it never plays again until refresh
        }

        // Load the image
        const totalPhotos = 20; 
        const randomNum = Math.floor(Math.random() * totalPhotos) + 1;
        imgElement.src = `images/${randomNum}.jpg`;
        
        imgElement.onload = function() {
            placeholder.style.display = 'none';
            imgElement.style.display = 'block';
        };

        // Fallback for missing images
        imgElement.onerror = function() {
            const retryNum = Math.floor(Math.random() * totalPhotos) + 1;
            imgElement.src = `images/${retryNum}.jpg`;
        };
    }
</script>
